# Ecommerce-Data-Cleaning-and-EDA-in-Pandas
У цьому файлі представлено покроковий опис виконання проєкту з дата клінінгу та EDA у Pandas
## 1. Завантаження [датасету із Kaggle](https://www.kaggle.com/datasets/nynkeugerard/dirty-ecommerce-data-eda-r)
В цьому датасеті багато даних, які навмисно були згенеровані з великою кількістю помилок для того, щоб попрактикуватись в очищенні даних
## 2. Імпорт необхідних бібліотек та датасету

![image](https://github.com/user-attachments/assets/e6c25343-6edf-4c31-956d-d7565ec172e5)

Після імпорту всього необхідного бачимо таблицю

![image](https://github.com/user-attachments/assets/12b6fad6-e6c4-4c07-8563-c7f3b5b8e3d9)

Також одразу можна переглянути коротку інформацію про цю таблицю

![image](https://github.com/user-attachments/assets/fec5e598-0c1c-4726-948a-c34187b13431)

Одразу кидається в очі, що є стовпці, які містять тип даних float, хоча мали б бути типу int, оскільки є цілими числами. Це виправимо у наступних кроках
## 3. Очищення даних
### 1) Видалення дублікатів
Видаляємо усі ідентичні рядки

![image](https://github.com/user-attachments/assets/457dd32d-ef69-44cc-bfb7-902345025dbf)

Після видалення дублікатів бачимо, що кількість записів зменшилась на 500 

![image](https://github.com/user-attachments/assets/7c0de272-3f01-4042-b3c4-e9606a76f070)

Оскільки існували повністю ідентичні рядки, отже попадались і повтори серед OrderID, які мали би бути унікальними значеннями. 

### 2) Унікальність OrderID
Перевіримо кількість унікальних OrderID 

![image](https://github.com/user-attachments/assets/69a08dec-aac6-48f6-a85e-dfe8f66e88b5)

Всього є 9500 замовлень, а унікальних OrderID лише 6123, що порушує умову унікальності. Тому необхідно створити новий стовпець OrderID, де всі значення будуть унікальними

![image](https://github.com/user-attachments/assets/798996b1-d53a-46f8-818a-c24e08a1b4cc)

Було створено додатковий DataFrame df2 для того щоб випадково не втратити наявні дані. Після чого у ньому ж створено стовпець NewOrderID, який заповнюється унікальними значеннями починаючи від 100000

![image](https://github.com/user-attachments/assets/4fff20bd-2e97-459d-9126-6c9c428c5491)

Замінюємо значення OrderID на значення із стовпця NewOrderID, після чого видаляємо останній. При перевірці на унікальність бачимо, що всі ідентифікатори унікальні

### 3) Приведення даних до правильних типів

![image](https://github.com/user-attachments/assets/34bbd4d0-dd98-449d-bb83-0880d372b701)

Помітно, що багато стовпців містять дані типу object та float, але для багатьох стовпців ці типи даних не підходять, тому замінимо їх підходящими.

#### а) Datetime

Перетворимо дані, що пов'язані із часом у формат Datetime

![image](https://github.com/user-attachments/assets/afce5b7a-a8b3-4d23-8fe7-688b0a7b75ad)

#### б) Category

Переглянемо унікальні даних у тих стовпцях, де їх мало б бути мало. 

![image](https://github.com/user-attachments/assets/cd704c61-1b09-4419-a306-ca95f5efacca)
![image](https://github.com/user-attachments/assets/0f939d92-9b89-4833-98ea-2fd231cc7ada)

Ці стовпці варто віднести до типу Category, тому що цей тип підходить для даних, де мало унікальних значень.

![image](https://github.com/user-attachments/assets/1c60da27-7fd9-44a3-9fdd-6b507a89a382)

#### в) Integer

Перетворимо дані що представляють цілі числа у тип Int64

![image](https://github.com/user-attachments/assets/420d6f3f-56b8-4384-8c41-58d6c7483685)

#### г) String

Для поштового індексу краще мати рядковий тип, оскільки поштовий індекс може містити нулі на початку. Але у нашому випадку поштові індекси не є інформативними, оскільки в більшості випадків не відповідають місту яким позначені. Тому цей стовпець краще видалити.

![image](https://github.com/user-attachments/assets/54d006ba-2370-4ea9-b984-04969b1dc77f)

#### Правильні типи

Тепер усі дані приведені до правильних типів

![image](https://github.com/user-attachments/assets/3beae764-793b-4c98-9251-16fa280b9330)

Можна помітити, що є int64 та Int64 типи даних. Різниця між ними полягає у тому, що Int64 допускає відсутність даних, а int64 ні. Це важливо у нашому випадку, тому що primary key не може мати порожніх значень.

### 4) Налаштування коректності локації

Подивимось на стовпці, що відповідають за локацію

![image](https://github.com/user-attachments/assets/1e552d95-987d-42f6-bce1-4f293c842bab)

Як бачимо, значення не співпадають між собою, тому потрібно змінити їх так, щоб усе було правильно.

#### а) Видалення зайвого
Я помітив, що у стовпці регіон вказано лише сторони горизонту і ці дані не мають ніякого сенсу, оскільки незрозуміло до чого у них прив'язка. Тому цей стовпець також варто видалити.

![image](https://github.com/user-attachments/assets/19840453-86ac-4e74-bca0-7f3caf3e491f)

#### б) Зміна помилкових назв категорій
Спершу додамо до City категорію Unknown, замінимо всі входження InvalidCity на Unknown та видалимо зайві категорії

![image](https://github.com/user-attachments/assets/bf7e6865-60eb-4157-be9c-19e81821706e)

#### в) Заповнення порожніх значень
Тепер заповнимо усі порожні значення

![image](https://github.com/user-attachments/assets/7058a9c5-c5de-428a-af81-3a4e477e5ade)
![image](https://github.com/user-attachments/assets/39a07645-e8e5-4461-85a6-9315d0c2dd5b)

#### г) Налаштування відповідності

Для того, щоб усі дані щодо локації були правильні напишемо функцію, що виправлятиме неправильні значення.
Для початку зробимо словники із правильними відношеннями.

![image](https://github.com/user-attachments/assets/db2c3e00-28fc-45f4-9447-051e43379895)

Після цього потрібно написати власне функцію. Щоб перевіряти чи правильна локація спершу будемо дивитись на місто, якщо воно відоме, то за словниками заповнимо відповідну країну та штат. Якщо відомий лише штат, то зі словників дізнаємось лише країну. А якщо відома лише країна, то точнішої інформації дістати уже не вийде.

![image](https://github.com/user-attachments/assets/9a25c939-fa52-4467-b91c-6db23486aa5b)

Виправлені дані запишемо уже в новий датафрейм df3. 

#### Правильні дані локації
Тепер порівняємо

![image](https://github.com/user-attachments/assets/2784a727-8a17-4cbe-a663-c16b4250fe7d)
![image](https://github.com/user-attachments/assets/181e5cf2-251b-4441-9f6d-943dba05443f)

Як бачимо, тепер інформація про локацію відображається коректно.

### 5) Налаштування коректності товарів

![image](https://github.com/user-attachments/assets/15216c48-4b5d-4f08-bbaa-292ebe92e47f)

Спершу потрібно видалити помилкові назви категорій та заповнити пропуски.

#### а) Зміна помилкових назв категорій

![image](https://github.com/user-attachments/assets/3c909d25-7c77-40f8-b34f-5ff94beb5652)

![image](https://github.com/user-attachments/assets/b8695558-e34a-4f44-8a7b-c970cd5ca41b)

#### б) Заповнення порожніх значень

Додаємо до кожної множини категорій категорію Unknown

![image](https://github.com/user-attachments/assets/5626d7c9-512b-4a2e-b8b6-d673d0c9b300)

Після цього заповнюємо всі пропуски цим значенням

![image](https://github.com/user-attachments/assets/81ebfa19-ca53-4717-9e22-776f19bad9b9)

Тепер подивимось що вийшло

![image](https://github.com/user-attachments/assets/d4ee5040-5171-4173-bb0a-eaea9baa89c8)

Бачимо, що товари не всюди відповідають категоріям чи підкатегоріям. Тому треба налаштувати правильну відповідність по аналогії із даними локації.

#### в) Налаштування відповідності

Спершу зробимо словники відповідностей.

![image](https://github.com/user-attachments/assets/02da9999-7a94-45c2-8c08-a8c8520466e0)

Після цього напишемо функцію аналогічну до попередньої

![image](https://github.com/user-attachments/assets/298eff13-abd3-4256-a653-27dd8c0323ff)

А зараз запишемо виправлені дані у новий датафрейм та порівняємо їх

![image](https://github.com/user-attachments/assets/efcdb80a-5742-4590-9329-45cca1214a3e)

![image](https://github.com/user-attachments/assets/3ef047f5-a23f-480f-829e-f84aad94bdd1)

Тепер бачимо, що всі відповідності між категоріями правильні. 

#### г) Ідентифікатор

Ідентифікатором товару у нас є ProductID. Ідентифікатор повинен бути унікальним для кожного окремого товару, тому для початку подивимось на кількість унікальних айді

![image](https://github.com/user-attachments/assets/35e16222-5372-46ac-b1d3-fb92c7da80f8)

У нас є 1000 унікальних айді, а унікальних товарів 5 (із явно вказаних), а також є товари із невідомою назвою. 
Подивимось скільки їх

![image](https://github.com/user-attachments/assets/f1894119-e3e4-4dd7-897e-844c4e31b0f2)

Отже у нас 1600 значень, кожне з яких мало б мати унікальний айді, яких всього 1000. 
Переглянемо для прикладу товари з айді 3225.

![image](https://github.com/user-attachments/assets/3cb88a8f-4819-4367-ae05-da8379aa8c58)

Бачимо, що однаковий ідентифікатор присвоєно багатьом різним товарам, а отже цей ідентифікатор не є коректним і стовпець можна видалити.

![image](https://github.com/user-attachments/assets/e38c371e-4dfd-4cc4-8bca-db4c65f241f8)

